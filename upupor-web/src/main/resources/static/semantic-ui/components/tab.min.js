!function(E,O,w,k){"use strict";O=void 0!==O&&O.Math==Math?O:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),E.fn.tab=function(r){var l,d=E.isFunction(this)?E(O):E(this),u=d.selector||"",b=(new Date).getTime(),P=[],C=r,F="string"==typeof C,S=[].slice.call(arguments,1),j=!1;return d.each(function(){var g,i,f,h,p,m=E.isPlainObject(r)?E.extend(!0,{},E.fn.tab.settings,r):E.extend({},E.fn.tab.settings),v=m.className,y=m.metadata,t=m.selector,T=m.error,e="."+m.namespace,a="module-"+m.namespace,L=E(this),n={},x=!0,o=0,s=this,c=L.data(a),A={initialize:function(){A.debug("Initializing tab menu item",L),A.fix.callbacks(),A.determineTabs(),A.debug("Determining tabs",m.context,i),m.auto&&A.set.auto(),A.bind.events(),m.history&&!j&&(A.initializeHistory(),j=!0),A.instantiate()},instantiate:function(){A.verbose("Storing instance of module",A),c=A,L.data(a,A)},destroy:function(){A.debug("Destroying tabs",L),L.removeData(a).off(e)},bind:{events:function(){E.isWindow(s)||(A.debug("Attaching tab activation events to element",L),L.on("click"+e,A.event.click))}},determineTabs:function(){var e;"parent"===m.context?(0<L.closest(t.ui).length?(e=L.closest(t.ui),A.verbose("Using closest UI element as parent",e)):e=L,g=e.parent(),A.verbose("Determined parent element for creating context",g)):m.context?(g=E(m.context),A.verbose("Using selector for tab context",m.context,g)):g=E("body"),m.childrenOnly?(i=g.children(t.tabs),A.debug("Searching tab context children for tabs",g,i)):(i=g.find(t.tabs),A.debug("Searching tab context for tabs",g,i))},fix:{callbacks:function(){E.isPlainObject(r)&&(r.onTabLoad||r.onTabInit)&&(r.onTabLoad&&(r.onLoad=r.onTabLoad,delete r.onTabLoad,A.error(T.legacyLoad,r.onLoad)),r.onTabInit&&(r.onFirstLoad=r.onTabInit,delete r.onTabInit,A.error(T.legacyInit,r.onFirstLoad)),m=E.extend(!0,{},E.fn.tab.settings,r))}},initializeHistory:function(){if(A.debug("Initializing page state"),E.address===k)return A.error(T.state),!1;if("state"==m.historyType){if(A.debug("Using HTML5 to manage state"),!1===m.path)return A.error(T.path),!1;E.address.history(!0).state(m.path)}E.address.bind("change",A.event.history.change)},event:{click:function(e){var t=E(this).data(y.tab);t!==k?(m.history?(A.verbose("Updating page state",e),E.address.value(t)):(A.verbose("Changing tab",e),A.changeTab(t)),e.preventDefault()):A.debug("No tab specified")},history:{change:function(e){var t=e.pathNames.join("/")||A.get.initialPath(),a=m.templates.determineTitle(t)||!1;A.performance.display(),A.debug("History change event",t,e),p=e,t!==k&&A.changeTab(t),a&&E.address.title(a)}}},refresh:function(){f&&(A.debug("Refreshing tab",f),A.changeTab(f))},cache:{read:function(e){return e!==k&&n[e]},add:function(e,t){e=e||f,A.debug("Adding cached content for",e),n[e]=t},remove:function(e){e=e||f,A.debug("Removing cached content for",e),delete n[e]}},set:{auto:function(){var e="string"==typeof m.path?m.path.replace(/\/$/,"")+"/{$tab}":"/{$tab}";A.verbose("Setting up automatic tab retrieval from server",e),E.isPlainObject(m.apiSettings)?m.apiSettings.url=e:m.apiSettings={url:e}},loading:function(e){var t=A.get.tabElement(e);t.hasClass(v.loading)||(A.verbose("Setting loading state for",t),t.addClass(v.loading).siblings(i).removeClass(v.active+" "+v.loading),0<t.length&&m.onRequest.call(t[0],e))},state:function(e){E.address.value(e)}},changeTab:function(l){var d=O.history&&O.history.pushState&&m.ignoreFirstLoad&&x,u=m.auto||E.isPlainObject(m.apiSettings),b=u&&!d?A.utilities.pathToArray(l):A.get.defaultPathArray(l);l=A.utilities.arrayToPath(b),E.each(b,function(e,t){var a,n,i=b.slice(0,e+1),o=A.utilities.arrayToPath(i),r=A.is.tab(o),s=e+1==b.length,c=A.get.tabElement(o);return A.verbose("Looking for tab",t),r?(A.verbose("Tab was found",t),f=o,h=A.utilities.filterArray(b,i),s?n=!0:(r=b.slice(0,e+2),t=A.utilities.arrayToPath(r),(n=!A.is.tab(t))&&A.verbose("Tab parameters found",r)),n&&u?(d?(A.debug("Ignoring remote content on first tab load",o),x=!1,A.cache.add(l,c.html()),A.activate.all(o),m.onFirstLoad.call(c[0],o,h,p),m.onLoad.call(c[0],o,h,p)):(A.activate.navigation(o),A.fetch.content(o,l)),!1):(A.debug("Opened local tab",o),A.activate.all(o),A.cache.read(o)||(A.cache.add(o,!0),A.debug("First time tab loaded calling tab init"),m.onFirstLoad.call(c[0],o,h,p)),void m.onLoad.call(c[0],o,h,p))):-1!=l.search("/")||""===l?(A.error(T.missingTab,L,g,o),!1):(o=(a=E("#"+l+', a[name="'+l+'"]')).closest("[data-tab]").data(y.tab),c=A.get.tabElement(o),a&&0<a.length&&o?(A.debug("Anchor link used, opening parent tab",c,a),c.hasClass(v.active)||setTimeout(function(){A.scrollTo(a)},0),A.activate.all(o),A.cache.read(o)||(A.cache.add(o,!0),A.debug("First time tab loaded calling tab init"),m.onFirstLoad.call(c[0],o,h,p)),m.onLoad.call(c[0],o,h,p),!1):void 0)})},scrollTo:function(e){var t=!!(e&&0<e.length)&&e.offset().top;!1!==t&&(A.debug("Forcing scroll to an in-page link in a hidden tab",t,e),E(w).scrollTop(t))},update:{content:function(e,t,a){var n=A.get.tabElement(e),i=n[0];a=a!==k?a:m.evaluateScripts,"string"==typeof m.cacheType&&"dom"==m.cacheType.toLowerCase()&&"string"!=typeof t?n.empty().append(E(t).clone(!0)):a?(A.debug("Updating HTML and evaluating inline scripts",e,t),n.html(t)):(A.debug("Updating HTML",e,t),i.innerHTML=t)}},fetch:{content:function(t,a){var e,n=A.get.tabElement(t),i={dataType:"html",encodeParameters:!1,on:"now",cache:m.alwaysRefresh,headers:{"X-Remote":!0},onSuccess:function(e){"response"==m.cacheType&&A.cache.add(a,e),A.update.content(t,e),t==f?(A.debug("Content loaded",t),A.activate.tab(t)):A.debug("Content loaded in background",t),m.onFirstLoad.call(n[0],t,h,p),m.onLoad.call(n[0],t,h,p),m.loadOnce?A.cache.add(a,!0):"string"==typeof m.cacheType&&"dom"==m.cacheType.toLowerCase()&&0<n.children().length?setTimeout(function(){var e=(e=n.children().clone(!0)).not("script");A.cache.add(a,e)},0):A.cache.add(a,n.html())},urlData:{tab:a}},o=n.api("get request")||!1,o=o&&"pending"===o.state();a=a||t,e=A.cache.read(a),m.cache&&e?(A.activate.tab(t),A.debug("Adding cached content",a),m.loadOnce||("once"==m.evaluateScripts?A.update.content(t,e,!1):A.update.content(t,e)),m.onLoad.call(n[0],t,h,p)):o?(A.set.loading(t),A.debug("Content is already loading",a)):E.api!==k?(e=E.extend(!0,{},m.apiSettings,i),A.debug("Retrieving remote content",a,e),A.set.loading(t),n.api(e)):A.error(T.api)}},activate:{all:function(e){A.activate.tab(e),A.activate.navigation(e)},tab:function(e){var t=A.get.tabElement(e),a="siblings"==m.deactivate?t.siblings(i):i.not(t),n=t.hasClass(v.active);A.verbose("Showing tab content for",t),n||(t.addClass(v.active),a.removeClass(v.active+" "+v.loading),0<t.length&&m.onVisible.call(t[0],e))},navigation:function(e){var t=A.get.navElement(e),a="siblings"==m.deactivate?t.siblings(d):d.not(t),n=t.hasClass(v.active);A.verbose("Activating tab navigation for",t,e),n||(t.addClass(v.active),a.removeClass(v.active+" "+v.loading))}},deactivate:{all:function(){A.deactivate.navigation(),A.deactivate.tabs()},navigation:function(){d.removeClass(v.active)},tabs:function(){i.removeClass(v.active+" "+v.loading)}},is:{tab:function(e){return e!==k&&0<A.get.tabElement(e).length}},get:{initialPath:function(){return d.eq(0).data(y.tab)||i.eq(0).data(y.tab)},path:function(){return E.address.value()},defaultPathArray:function(e){return A.utilities.pathToArray(A.get.defaultPath(e))},defaultPath:function(e){var t=d.filter("[data-"+y.tab+'^="'+e+'/"]').eq(0).data(y.tab)||!1;if(t){if(A.debug("Found default tab",t),o<m.maxDepth)return o++,A.get.defaultPath(t);A.error(T.recursion)}else A.debug("No default tabs found for",e,i);return o=0,e},navElement:function(e){return e=e||f,d.filter("[data-"+y.tab+'="'+e+'"]')},tabElement:function(e){var t;return e=e||f,t=A.utilities.pathToArray(e),t=A.utilities.last(t),e=i.filter("[data-"+y.tab+'="'+e+'"]'),t=i.filter("[data-"+y.tab+'="'+t+'"]'),0<e.length?e:t},tab:function(){return f}},utilities:{filterArray:function(e,t){return E.grep(e,function(e){return-1==E.inArray(e,t)})},last:function(e){return!!E.isArray(e)&&e[e.length-1]},pathToArray:function(e){return"string"==typeof(e=e===k?f:e)?e.split("/"):[e]},arrayToPath:function(e){return!!E.isArray(e)&&e.join("/")}},setting:function(e,t){if(A.debug("Changing setting",e,t),E.isPlainObject(e))E.extend(!0,m,e);else{if(t===k)return m[e];E.isPlainObject(m[e])?E.extend(!0,m[e],t):m[e]=t}},internal:function(e,t){if(E.isPlainObject(e))E.extend(!0,A,e);else{if(t===k)return A[e];A[e]=t}},debug:function(){!m.silent&&m.debug&&(m.performance?A.performance.log(arguments):(A.debug=Function.prototype.bind.call(console.info,console,m.name+":"),A.debug.apply(console,arguments)))},verbose:function(){!m.silent&&m.verbose&&m.debug&&(m.performance?A.performance.log(arguments):(A.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),A.verbose.apply(console,arguments)))},error:function(){m.silent||(A.error=Function.prototype.bind.call(console.error,console,m.name+":"),A.error.apply(console,arguments))},performance:{log:function(e){var t,a;m.performance&&(a=(t=(new Date).getTime())-(b||t),b=t,P.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:s,"Execution Time":a})),clearTimeout(A.performance.timer),A.performance.timer=setTimeout(A.performance.display,500)},display:function(){var e=m.name+":",a=0;b=!1,clearTimeout(A.performance.timer),E.each(P,function(e,t){a+=t["Execution Time"]}),e+=" "+a+"ms",u&&(e+=" '"+u+"'"),(console.group!==k||console.table!==k)&&0<P.length&&(console.groupCollapsed(e),console.table?console.table(P):E.each(P,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),P=[]}},invoke:function(n,e,t){var i,o,a,r=c;return e=e||S,t=s||t,"string"==typeof n&&r!==k&&(n=n.split(/[\. ]/),i=n.length-1,E.each(n,function(e,t){var a=e!=i?t+n[e+1].charAt(0).toUpperCase()+n[e+1].slice(1):n;if(E.isPlainObject(r[a])&&e!=i)r=r[a];else{if(r[a]!==k)return o=r[a],!1;{if(!E.isPlainObject(r[t])||e==i)return r[t]!==k?o=r[t]:A.error(T.method,n),!1;r=r[t]}}})),E.isFunction(o)?a=o.apply(t,e):o!==k&&(a=o),E.isArray(l)?l.push(a):l!==k?l=[l,a]:a!==k&&(l=a),o}};F?(c===k&&A.initialize(),A.invoke(C)):(c!==k&&c.invoke("destroy"),A.initialize())}),l!==k?l:this},E.tab=function(){E(O).tab.apply(this,arguments)},E.fn.tab.settings={name:"Tab",namespace:"tab",silent:!1,debug:!1,verbose:!1,performance:!0,auto:!1,history:!1,historyType:"hash",path:!1,context:!1,childrenOnly:!1,maxDepth:25,deactivate:"siblings",alwaysRefresh:!1,cache:!0,loadOnce:!1,cacheType:"response",ignoreFirstLoad:!1,apiSettings:!1,evaluateScripts:"once",onFirstLoad:function(e,t,a){},onLoad:function(e,t,a){},onVisible:function(e,t,a){},onRequest:function(e,t,a){},templates:{determineTitle:function(e){}},error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Activated tab cannot be found. Tabs are case-sensitive.",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",legacyInit:"onTabInit has been renamed to onFirstLoad in 2.0, please adjust your code.",legacyLoad:"onTabLoad has been renamed to onLoad in 2.0. Please adjust your code",state:"History requires Asual's Address library <https://github.com/asual/jquery-address>"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab",ui:".ui"}}}(jQuery,window,document);